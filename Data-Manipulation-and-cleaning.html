<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yunshen Bai" />

<meta name="date" content="2023-12-08" />

<title>Data Manipulation and cleaning</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data-Manipulation-and-cleaning.html">Data</a>
</li>
<li>
  <a href="eda.html">EDA</a>
</li>
<li>
  <a href="https://kindle0118.shinyapps.io/corruption_index/">Shiny</a>
</li>
<li>
  <a href="dashboard.html">Dashboard</a>
</li>
<li>
  <a href="regression.html">Regression</a>
</li>
<li>
  <a href="website.html">Video</a>
</li>
<li>
  <a href="project_report.html">Report</a>
</li>
<li>
  <a href="mailto:&lt;sc5351@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/kindlezhang/p8105_final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data Manipulation and cleaning</h1>
<h4 class="author">Yunshen Bai</h4>
<h4 class="date">2023-12-08</h4>

</div>


<div id="source-1corruption-index" class="section level2">
<h2>Source 1:Corruption Index</h2>
<pre class="r"><code>corruption=read_csv(&quot;./data/corruption_index.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(value=(as.numeric(x2020_yr2020)+as.numeric(x2020_yr2020)+as.numeric(x2020_yr2020))/3)|&gt;
  select(country_name,country_code,series_name,value)|&gt;
  pivot_wider(
    names_from = &quot;series_name&quot;,
    values_from = &quot;value&quot;
  )|&gt;
  janitor::clean_names()</code></pre>
<p>We believe that it would be useful to ascertain the officially
published data on the corruption index for the last 20 years. This data
is provided by <a
href="https://databank.worldbank.org/source/world-development-indicators">The
World bank</a> and is public information. World data bank gives
estimated scores for countries on the overall corruption indicator.
Following this indicator, we also find five indicators Government
Effectiveness, Political Stability and Absence of Violence, Regulatory
Quality, Rule of Law, Voice and Accountability may be correlated with
the Corruption Index. This dataset contains information from 1996 to
2022.</p>
<p>The World data bank dataset was downloaded and read in. The dataset
contains data for all indicators from 1996 to 2022 to reflect how they
change from year to year. In this dataset, we keep all the variables. To
make the data more readable and easier to analyze later, we made the
dataset wide and created a new year variable to record year.</p>
</div>
<div id="source-2-country-code" class="section level2">
<h2>Source 2: Country Code</h2>
<pre class="r"><code>isso_code=
  read_html(&quot;https://www.countrycode.org/&quot;)|&gt;
  html_elements(&quot;td:nth-child(3)&quot;)|&gt;
  html_text()

country_name_isso=
  read_html(&quot;https://www.countrycode.org/&quot;)|&gt;
  html_elements(&quot;td:nth-child(1)&quot;)|&gt;
  html_text()

country_code=data.frame(country_name_isso,str_split_fixed(isso_code, &#39;/&#39;,2))|&gt;
  rename(c(country_code_2=X1,country_code_3=X2))|&gt;
  mutate(country_code_2=gsub(&#39;[ ]&#39;,&#39;&#39;,country_code_2),
         country_code_3=gsub(&#39;[ ]&#39;,&#39;&#39;,country_code_3))|&gt;
  distinct(country_code_3, .keep_all = T)</code></pre>
<p>In order to have a better integration of the subsequent data and to
avoid unnecessary trouble due to the fact that the names of the
countries recorded are different in different datasets. We decided to
use the country code to refer to the country.</p>
<p>This dataset is derived from <a
href="https://www.countrycode.org/">countrycode.org</a>. The data set
was not available to download but we were able to scrape it from the
website. We read the country name and ISSO code columns and split the
ISSO code into country_code_2 and country_code_3.</p>
</div>
<div id="sourse-3gdp" class="section level2">
<h2>Sourse 3:GDP</h2>
<pre class="r"><code>average_GDP=read_csv(&quot;./data/GDP.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  filter(average_gdp!=&quot;#DIV/0!&quot;)|&gt;
  mutate(GDP=as.numeric(average_gdp))|&gt;
  select(country_name,country_code,GDP)|&gt;
  mutate(GDP=GDP/10^9)

GDP_EDA=
  read_csv(&quot;./data/GDP.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  select(country_code,x1996:x2022)|&gt;
  pivot_longer(
    x1996:x2022,
    names_to = &quot;year&quot;,
    values_to = &quot;GDP&quot;
               )|&gt;
  mutate(GDP=GDP/10^9,
         year=substr(year,2,5))

GDP_per_capita_EDA=
  read_csv(&quot;./data/GDP_per_capita.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  select(country_code,x1996:x2022)|&gt;
  pivot_longer(
    x1996:x2022,
    names_to = &quot;year&quot;,
    values_to = &quot;GDP_per_capita&quot;
               )|&gt;
  mutate(year=substr(year,2,5))</code></pre>
<p>We are also interested in whether there is a correlation between a
country’s level of economic development and the corruption index. This
dataset comes from <a
href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD">The World
Bank</a>. This dataset records the GDP of each country from 1960 to
2022. we divide the GDP by <span class="math inline">\(10^9\)</span> to
make the data more readable. We pivoted this dataset to long format and
created <code>average_GDP</code> for future analysis.</p>
</div>
<div id="source-4continent" class="section level2">
<h2>Source 4:Continent</h2>
<pre class="r"><code>Africa=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/africa-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()

Asia=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/asia-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()

Europe=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/europe-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()|&gt;
  append(&quot;JEY&quot;)

North_America=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/north-america-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()

South_America=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/south-america-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()

Oceania=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/australia-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()

Antarctica=
  read_html(&quot;https://www.countrycallingcodes.com/iso-country-codes/antarctica-codes.php&quot;) |&gt;
  html_elements(&quot;tr+ tr td:nth-child(3) font&quot;) |&gt;
  html_text()</code></pre>
<p>The geographical location of a country may also have a bearing on a
country’s corruption index. Therefore, we decided to find the continent
on which each country is located and explore whether it has an impact on
the corruption index. This dataset comes from <a
href="https://www.countrycallingcodes.com/iso-country-codes/">countrycallingcodes.com</a>,
where we read the country codes of the countries contained in each
continent. The data set was not available to download but we were able
to scrape it from the website. In future analyses, we will use this data
to match the continent of the country.</p>
</div>
<div id="source-5-development" class="section level2">
<h2>Source 5: Development</h2>
<pre class="r"><code>developed=
  read_csv(&quot;./data/developed-countries-2023.csv&quot;)|&gt;
  pull(cca3)
least_develpoed=
  read_csv(&quot;./data/least-developed-countries-2023.csv&quot;)|&gt;
  pull(cca3)</code></pre>
<p>Countries in the world can be roughly divided into developed
countries, developing countries and least developed countries. A
country’s corruption index may be related to its state of development.
This dataset comes from <a
href="https://worldpopulationreview.com/">World Population Review</a>.
This dataset records the state of development of countries in 2023.</p>
</div>
<div id="source-6-coordinate" class="section level2">
<h2>Source 6: Coordinate</h2>
<pre class="r"><code>coordinate_html=
  read_html(&quot;https://developers.google.com/public-data/docs/canonical/countries_csv?hl=en&quot;)

country_name=
  coordinate_html |&gt;
  html_elements(&quot;td:nth-child(4)&quot;) |&gt;
  html_text()

country_code2=
  coordinate_html |&gt;
  html_elements(&quot;td:nth-child(1)&quot;) |&gt;
  html_text() 

latitude=
  coordinate_html |&gt;
  html_elements(&quot;td:nth-child(2)&quot;) |&gt;
  html_text()

longitude=
  coordinate_html |&gt;
  html_elements(&quot;td:nth-child(3)&quot;) |&gt;
  html_text()

country_coordinate=
  data.frame(country_name,country_code2,latitude,longitude)|&gt;
  left_join(country_code,join_by(country_code2==country_code_2))|&gt;
  select(country_name,country_code=country_code_3,latitude,longitude)</code></pre>
<p>We need the coordinates of the countries for the future EDA session.
This dataset comes from <a
href="https://developers.google.com/public-data/docs/canonical/countries_csv?hl=en">Google
for Developers</a>. Since this dataset records two-digit country codes
and the other datasets use three-digit country codes, we use the
<code>left_join</code> function to match their country codes and keep
only the three-digit country code.</p>
</div>
<div id="source-7-population" class="section level2">
<h2>Source 7: Population</h2>
<pre class="r"><code>average_population=read_csv(&quot;./data/population.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  filter(average_population!=&quot;#DIV/0!&quot;)|&gt;
  mutate(population=as.numeric(average_population))|&gt;
  select(country_name,country_code,population)|&gt;
  mutate(population=population/(10^7))

population=read_csv(&quot;./data/population.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  select(country_name,country_code,x1996:x2022)|&gt;
  pivot_longer(
    x1996:x2022,
    names_to = &quot;year&quot;,
    values_to = &quot;population&quot;)|&gt;
  mutate(year=substr(year,2,5),
         population=population/(10^7))</code></pre>
<p>We are also interested in whether there is a correlation between a
country’s population and the corruption index. This dataset comes from
<a href="https://data.worldbank.org/indicator/SP.POP.TOTL">The World
Bank</a>. This dataset records the population of each country from 1960
to 2022. We pivoted this dataset to long format and created
<code>average_population</code> for future analysis.</p>
</div>
<div id="merge-datasets" class="section level2">
<h2>Merge Datasets</h2>
<pre class="r"><code>corruption_data=left_join(corruption,country_code,join_by(country_code==country_code_3))|&gt;
  left_join(average_GDP,join_by(country_code==country_code))|&gt;
  left_join(country_coordinate,join_by(country_code))|&gt;
  left_join(average_population,by=join_by(country_code))|&gt;
  mutate(development=case_when(
    country_code %in% developed ~ &quot;Developed&quot;,
    country_code %in% least_develpoed ~ &quot;Least Developed&quot;,
    (!country_code %in% developed) &amp; (!country_code %in% least_develpoed) ~ &quot;Developing&quot;
  ))|&gt;
  mutate(continent=case_when(
    country_code %in% Asia ~ &quot;Asia&quot;,
    country_code %in% Africa ~ &quot;Africa&quot;,
    country_code %in% Europe ~ &quot;Europe&quot;,
    country_code %in% North_America ~ &quot;North America&quot;,
    country_code %in% South_America ~ &quot;South America&quot;,
    country_code %in% Oceania ~ &quot;Oceania&quot;,
    country_code %in% Antarctica ~ &quot;Antarctica&quot;
  ))|&gt;
  select(country_name=country_name.x,country_code,
         con_cor=control_of_corruption_estimate,
         gov_eff=government_effectiveness_estimate,
         pol_vio=political_stability_and_absence_of_violence_terrorism_estimate,
         regu_qual=regulatory_quality_estimate,
         rul_law=rule_of_law_estimate,
         voi_acc=voice_and_accountability_estimate,
         GDP,population,latitude,longitude,development,continent)

write.table(corruption_data,&quot;./data/cleaned_data/overall_dataset.csv&quot;,row.names=FALSE,col.names=TRUE,sep=&quot;,&quot;)</code></pre>
<pre class="r"><code>corruption_EDA_pre=read_csv(&quot;./data/corruption_index.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  pivot_longer(
    cols = x1996_yr1996:x2022_yr2022,
    names_to = &quot;year&quot;,
    values_to = &quot;value&quot;
  )|&gt;
  mutate(year=substr(year,2,5))|&gt;
  select(-series_code)|&gt;
  pivot_wider(
    names_from = &quot;series_name&quot;,
    values_from = &quot;value&quot;
  )


corruption_EDA=
  corruption_EDA_pre|&gt;
  left_join(GDP_EDA,by = join_by(country_code, year))|&gt;
  left_join(GDP_per_capita_EDA,by = join_by(country_code, year))|&gt;
  janitor::clean_names()|&gt;
  select(country_name,country_code,year,
         con_cor=control_of_corruption_estimate,
         gov_eff=government_effectiveness_estimate,
         pol_vio=political_stability_and_absence_of_violence_terrorism_estimate,
         regu_qual=regulatory_quality_estimate,
         rul_law=rule_of_law_estimate,
         voi_acc=voice_and_accountability_estimate,
         gdp,gdp_per_capita)|&gt;
  mutate(continent=case_when(
    country_code %in% Asia ~ &quot;Asia&quot;,
    country_code %in% Africa ~ &quot;Africa&quot;,
    country_code %in% Europe ~ &quot;Europe&quot;,
    country_code %in% North_America ~ &quot;North America&quot;,
    country_code %in% South_America ~ &quot;South America&quot;,
    country_code %in% Oceania ~ &quot;Oceania&quot;,
    country_code %in% Antarctica ~ &quot;Antarctica&quot;
  ))|&gt;
  mutate(development=case_when(
    country_code %in% developed ~ &quot;Developed&quot;,
    country_code %in% least_develpoed ~ &quot;Least Developed&quot;,
    (!country_code %in% developed) &amp; (!country_code %in% least_develpoed) ~ &quot;Developing&quot;
  ))|&gt;
    left_join(country_coordinate,join_by(country_code))|&gt;
  left_join(population,join_by(country_code,year))|&gt;
  select(country_name=country_name.x,everything(),-country_name.y,-country_name)|&gt;
  mutate(con_cor=as.numeric(con_cor),
         gov_eff=as.numeric(gov_eff),
         pol_vio=as.numeric(pol_vio),
         regu_qual=as.numeric(regu_qual),
         rul_law=as.numeric(rul_law),
         voi_acc=as.numeric(voi_acc),
         year=as.numeric(year)
         )
  
write.table(corruption_EDA,&quot;./data/corruption_EDA.csv&quot;,row.names=FALSE,col.names=TRUE,sep=&quot;,&quot;)</code></pre>
<p>Since we cleaned the datasets we got, we need to merge these datasets
for our future analysis. Since <code>country_code</code> is the common
variable in every datasets, we use <code>left_join</code> function to
merge these datasets together. For those dataset is not suitable for
<code>left_join</code>, we use <code>case_when</code> function to merge
them into the cleaned dataset. The cleaned dataset include the following
variables:</p>
<ul>
<li><code>country_name</code>: Country names</li>
<li><code>country_code</code>: Country codes</li>
<li><code>year</code>: year</li>
<li><code>con_cor</code>: Control of corruption<br />
</li>
<li><code>gov_eff</code>: Government effectiveness<br />
</li>
<li><code>pol_vio</code>: Political stability and absence of violence
terrorism<br />
</li>
<li><code>regu_qual</code>: Regulatory quality<br />
</li>
<li><code>rul_law</code>: Rule of law<br />
</li>
<li><code>voi_acc</code>: Voice and accountability<br />
</li>
<li><code>gdp</code>:GDP of countries(<span
class="math inline">\(10^9\)</span>)</li>
<li><code>gdp_per_capita</code>: GDP per capita of countries</li>
<li><code>continent</code>: Continent where the countries are
located</li>
<li><code>development</code>: Status of development of countries</li>
<li><code>latitude</code>: latitude</li>
<li><code>longitude</code>: longitude</li>
<li><code>population</code>: Population of countries(<span
class="math inline">\(10^7\)</span>)</li>
</ul>
<p>For the dataset we used in regression section, we take the average
value of the numeric variables from 2020-2022.</p>
<pre class="r"><code>corruption_data|&gt;
  head(20)|&gt;
  knitr::kable()</code></pre>
<table style="width:100%;">
<colgroup>
<col width="11%" />
<col width="7%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="9%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">country_name</th>
<th align="left">country_code</th>
<th align="right">con_cor</th>
<th align="right">gov_eff</th>
<th align="right">pol_vio</th>
<th align="right">regu_qual</th>
<th align="right">rul_law</th>
<th align="right">voi_acc</th>
<th align="right">GDP</th>
<th align="right">population</th>
<th align="left">latitude</th>
<th align="left">longitude</th>
<th align="left">development</th>
<th align="left">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">AFG</td>
<td align="right">-1.4936998</td>
<td align="right">-1.6095092</td>
<td align="right">-2.7026317</td>
<td align="right">-1.3891630</td>
<td align="right">-1.8313743</td>
<td align="right">-1.0776886</td>
<td align="right">17.363294</td>
<td align="right">4.0066821</td>
<td align="left">33.93911</td>
<td align="left">67.709953</td>
<td align="left">Least Developed</td>
<td align="left">Asia</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">ALB</td>
<td align="right">-0.5729245</td>
<td align="right">-0.1548803</td>
<td align="right">0.0885765</td>
<td align="right">0.2219672</td>
<td align="right">-0.3762492</td>
<td align="right">0.0864026</td>
<td align="right">17.325132</td>
<td align="right">0.2808383</td>
<td align="left">41.153332</td>
<td align="left">20.168331</td>
<td align="left">Developing</td>
<td align="left">Europe</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
<td align="left">DZA</td>
<td align="right">-0.6664602</td>
<td align="right">-0.5734335</td>
<td align="right">-0.8478143</td>
<td align="right">-1.3553003</td>
<td align="right">-0.8003030</td>
<td align="right">-1.0879523</td>
<td align="right">167.043000</td>
<td align="right">4.4177620</td>
<td align="left">28.033886</td>
<td align="left">1.659626</td>
<td align="left">Developing</td>
<td align="left">Africa</td>
</tr>
<tr class="even">
<td align="left">American Samoa</td>
<td align="left">ASM</td>
<td align="right">1.2660053</td>
<td align="right">0.6328993</td>
<td align="right">1.0916016</td>
<td align="right">0.5253105</td>
<td align="right">1.1194303</td>
<td align="right">0.9520435</td>
<td align="right">0.712500</td>
<td align="right">0.0045166</td>
<td align="left">-14.270972</td>
<td align="left">-170.132217</td>
<td align="left">Developing</td>
<td align="left">Oceania</td>
</tr>
<tr class="odd">
<td align="left">Andorra</td>
<td align="left">AND</td>
<td align="right">1.2660053</td>
<td align="right">1.7494141</td>
<td align="right">1.5885718</td>
<td align="right">1.3354213</td>
<td align="right">1.6162784</td>
<td align="right">1.0862534</td>
<td align="right">3.189393</td>
<td align="right">0.0078853</td>
<td align="left">42.546245</td>
<td align="left">1.601554</td>
<td align="left">Developed</td>
<td align="left">Europe</td>
</tr>
<tr class="even">
<td align="left">Angola</td>
<td align="left">AGO</td>
<td align="right">-0.9386725</td>
<td align="right">-1.2583939</td>
<td align="right">-0.6007260</td>
<td align="right">-0.8568535</td>
<td align="right">-0.9509994</td>
<td align="right">-0.8160028</td>
<td align="right">74.213601</td>
<td align="right">3.4507082</td>
<td align="left">-11.202692</td>
<td align="left">17.873887</td>
<td align="left">Least Developed</td>
<td align="left">Africa</td>
</tr>
<tr class="odd">
<td align="left">Anguilla</td>
<td align="left">AIA</td>
<td align="right">0.6324695</td>
<td align="right">0.9120280</td>
<td align="right">1.5037429</td>
<td align="right">0.9303660</td>
<td align="right">0.3741581</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">18.220554</td>
<td align="left">-63.068615</td>
<td align="left">Developing</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">Antigua and Barbuda</td>
<td align="left">ATG</td>
<td align="right">0.2385333</td>
<td align="right">-0.2044867</td>
<td align="right">0.9295049</td>
<td align="right">0.4976937</td>
<td align="right">0.4079735</td>
<td align="right">0.7427933</td>
<td align="right">1.578157</td>
<td align="right">0.0093215</td>
<td align="left">17.060816</td>
<td align="left">-61.796428</td>
<td align="left">Developing</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">Argentina</td>
<td align="left">ARG</td>
<td align="right">-0.1637807</td>
<td align="right">-0.2538182</td>
<td align="right">-0.0720262</td>
<td align="right">-0.4983443</td>
<td align="right">-0.4873348</td>
<td align="right">0.5852944</td>
<td align="right">501.846000</td>
<td align="right">4.5806780</td>
<td align="left">-38.416097</td>
<td align="left">-63.616672</td>
<td align="left">Developed</td>
<td align="left">South America</td>
</tr>
<tr class="even">
<td align="left">Armenia</td>
<td align="left">ARM</td>
<td align="right">-0.0034387</td>
<td align="right">-0.3046165</td>
<td align="right">-0.7716423</td>
<td align="right">0.2387480</td>
<td align="right">-0.1258523</td>
<td align="right">0.0471597</td>
<td align="right">15.335297</td>
<td align="right">0.2792350</td>
<td align="left">40.069099</td>
<td align="left">45.038189</td>
<td align="left">Developing</td>
<td align="left">Asia</td>
</tr>
<tr class="odd">
<td align="left">Aruba</td>
<td align="left">ABW</td>
<td align="right">1.1993917</td>
<td align="right">1.0752245</td>
<td align="right">1.3714974</td>
<td align="right">0.9148085</td>
<td align="right">1.2702624</td>
<td align="right">1.2821430</td>
<td align="right">2.868029</td>
<td align="right">0.0106522</td>
<td align="left">12.52111</td>
<td align="left">-69.968338</td>
<td align="left">Developing</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">AUS</td>
<td align="right">1.6329559</td>
<td align="right">1.5737755</td>
<td align="right">0.8616769</td>
<td align="right">1.8139470</td>
<td align="right">1.6142451</td>
<td align="right">1.2980305</td>
<td align="right">1518.350000</td>
<td align="right">2.5774101</td>
<td align="left">-25.274398</td>
<td align="left">133.775136</td>
<td align="left">Developed</td>
<td align="left">Oceania</td>
</tr>
<tr class="odd">
<td align="left">Austria</td>
<td align="left">AUT</td>
<td align="right">1.4777892</td>
<td align="right">1.6062636</td>
<td align="right">0.8875288</td>
<td align="right">1.3952273</td>
<td align="right">1.7701634</td>
<td align="right">1.3944378</td>
<td align="right">462.331000</td>
<td align="right">0.8971730</td>
<td align="left">47.516231</td>
<td align="left">14.550072</td>
<td align="left">Developed</td>
<td align="left">Europe</td>
</tr>
<tr class="even">
<td align="left">Azerbaijan</td>
<td align="left">AZE</td>
<td align="right">-1.0770841</td>
<td align="right">-0.1555638</td>
<td align="right">-0.8522475</td>
<td align="right">-0.3360401</td>
<td align="right">-0.7307201</td>
<td align="right">-1.5415164</td>
<td align="right">58.746490</td>
<td align="right">1.0135296</td>
<td align="left">40.143105</td>
<td align="left">47.576927</td>
<td align="left">Developing</td>
<td align="left">Asia</td>
</tr>
<tr class="odd">
<td align="left">Bahamas, The</td>
<td align="left">BHS</td>
<td align="right">1.1062059</td>
<td align="right">0.4056442</td>
<td align="right">0.8302374</td>
<td align="right">0.0013662</td>
<td align="right">0.0232638</td>
<td align="right">0.9154646</td>
<td align="right">11.393200</td>
<td align="right">0.0408120</td>
<td align="left">25.03428</td>
<td align="left">-77.39628</td>
<td align="left">Developed</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">Bahrain</td>
<td align="left">BHR</td>
<td align="right">-0.0935939</td>
<td align="right">0.3907681</td>
<td align="right">-0.6101093</td>
<td align="right">0.6148575</td>
<td align="right">0.4553994</td>
<td align="right">-1.4533018</td>
<td align="right">39.438677</td>
<td align="right">0.1470989</td>
<td align="left">25.930414</td>
<td align="left">50.637772</td>
<td align="left">Developed</td>
<td align="left">Asia</td>
</tr>
<tr class="odd">
<td align="left">Bangladesh</td>
<td align="left">BGD</td>
<td align="right">-1.0036772</td>
<td align="right">-0.7797257</td>
<td align="right">-0.9158078</td>
<td align="right">-0.9062135</td>
<td align="right">-0.5679290</td>
<td align="right">-0.7695580</td>
<td align="right">416.789000</td>
<td align="right">16.9321191</td>
<td align="left">23.684994</td>
<td align="left">90.356331</td>
<td align="left">Least Developed</td>
<td align="left">Asia</td>
</tr>
<tr class="even">
<td align="left">Barbados</td>
<td align="left">BRB</td>
<td align="right">1.1940669</td>
<td align="right">0.4440223</td>
<td align="right">1.1205775</td>
<td align="right">0.4677958</td>
<td align="right">0.2966763</td>
<td align="right">1.1254591</td>
<td align="right">5.051171</td>
<td align="right">0.0281176</td>
<td align="left">13.193887</td>
<td align="left">-59.543198</td>
<td align="left">Developing</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">Belarus</td>
<td align="left">BLR</td>
<td align="right">-0.1339642</td>
<td align="right">-0.8295090</td>
<td align="right">-0.8876082</td>
<td align="right">-0.7998758</td>
<td align="right">-1.0822419</td>
<td align="right">-1.4534981</td>
<td align="right">67.946320</td>
<td align="right">0.9297079</td>
<td align="left">53.709807</td>
<td align="left">27.953389</td>
<td align="left">Developed</td>
<td align="left">Europe</td>
</tr>
<tr class="even">
<td align="left">Belgium</td>
<td align="left">BEL</td>
<td align="right">1.4459563</td>
<td align="right">1.0787830</td>
<td align="right">0.5210230</td>
<td align="right">1.3436358</td>
<td align="right">1.3280041</td>
<td align="right">1.2784452</td>
<td align="right">566.056000</td>
<td align="right">1.1600334</td>
<td align="left">50.503887</td>
<td align="left">4.469936</td>
<td align="left">Developed</td>
<td align="left">Europe</td>
</tr>
</tbody>
</table>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
